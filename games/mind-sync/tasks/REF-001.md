# REF-001: Split Monolithic HTML into Separate Files

## Status: ðŸŸ¡ In Progress
## Priority: High
## Created: 2026-01-09

## Description

The current `index.html` file contains over 1000 lines of mixed HTML, CSS references, and JavaScript. This makes the code hard to maintain, debug, and test.

## Current Structure

```
index.html (1024 lines)
â”œâ”€â”€ HTML Structure (lines 1-210)
â”‚   â”œâ”€â”€ Head (meta, links)
â”‚   â”œâ”€â”€ Lobby Screen
â”‚   â”œâ”€â”€ Game Screen  
â”‚   â””â”€â”€ Result Screen
â””â”€â”€ JavaScript (lines 211-1024)
    â”œâ”€â”€ Firebase imports
    â”œâ”€â”€ Config
    â”œâ”€â”€ Game Settings
    â”œâ”€â”€ Game State
    â”œâ”€â”€ DOM Elements
    â”œâ”€â”€ Language System
    â”œâ”€â”€ Settings Handlers
    â”œâ”€â”€ Screen Management
    â”œâ”€â”€ Room Code Generation
    â”œâ”€â”€ Card Shuffling
    â”œâ”€â”€ Create Room
    â”œâ”€â”€ Join Room
    â”œâ”€â”€ Listen to Room
    â”œâ”€â”€ Mistakes Display
    â”œâ”€â”€ Render Hand
    â”œâ”€â”€ Update Game UI
    â”œâ”€â”€ Play Card
    â”œâ”€â”€ Timer
    â”œâ”€â”€ Show Result
    â”œâ”€â”€ Play Again
    â””â”€â”€ Event Listeners
```

## Target Structure

```
games/mind-sync/
â”œâ”€â”€ index.html          # HTML only (~200 lines)
â”œâ”€â”€ style.css           # Existing CSS file
â””â”€â”€ js/
    â”œâ”€â”€ config.js       # Firebase config, constants, game settings
    â”œâ”€â”€ i18n.js         # Language system (setLanguage, t function)
    â”œâ”€â”€ state.js        # Game state management
    â”œâ”€â”€ firebase.js     # Firebase operations (create, join, listen, update)
    â”œâ”€â”€ game.js         # Core game logic (shuffle, validate, play)
    â”œâ”€â”€ ui.js           # UI rendering (screens, hands, timer, results)
    â””â”€â”€ app.js          # Main initialization, event listeners
```

## Implementation Steps

1. [ ] Create `js/` directory
2. [ ] Extract Firebase config â†’ `js/config.js`
3. [ ] Extract language system â†’ `js/i18n.js`
4. [ ] Extract game state â†’ `js/state.js`
5. [ ] Extract Firebase operations â†’ `js/firebase.js`
6. [ ] Extract game logic â†’ `js/game.js`
7. [ ] Extract UI code â†’ `js/ui.js`
8. [ ] Create main app â†’ `js/app.js`
9. [ ] Update `index.html` to use ES modules
10. [ ] Test all functionality

## Module Dependencies

```
app.js
â”œâ”€â”€ config.js (constants)
â”œâ”€â”€ state.js (game state)
â”œâ”€â”€ i18n.js (translations)
â”œâ”€â”€ ui.js
â”‚   â”œâ”€â”€ state.js
â”‚   â””â”€â”€ i18n.js
â”œâ”€â”€ firebase.js
â”‚   â”œâ”€â”€ config.js
â”‚   â””â”€â”€ state.js
â””â”€â”€ game.js
    â”œâ”€â”€ state.js
    â”œâ”€â”€ firebase.js
    â””â”€â”€ ui.js
```

## Notes

- Use ES6 modules with `export` and `import`
- Keep Firebase SDK imports in the HTML or config.js
- Ensure all functions are properly exported/imported
- Test after each extraction step
