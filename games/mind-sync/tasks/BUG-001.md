# BUG-001: Card Validation Not Working Correctly

## Status: ðŸ”´ Open
## Priority: High
## Created: 2026-01-09

## Description

The card validation logic is not working as expected. Players can play cards out of order and the game says "Perfect Sync" even when mistakes were made.

## Expected Behavior

When a player plays a card, the game should check if the **other player has any unplayed card that is smaller**. If yes, it's a mistake because the other player should have played first.

**Example:**
- Player 1 has: [3, 7, 9]
- Player 2 has: [2, 5, 8]
- If Player 1 plays 3, it should FAIL because Player 2 has 2 (smaller)
- If Player 2 plays 2 first, then Player 1 can play 3 (no one has smaller)

## Actual Behavior

The validation appears to pass even when the other player has smaller cards. Game said "Perfect Sync" when cards were played as 1-10-5-15.

## Root Cause Analysis

Need to investigate:
1. Is `roomData.player2.cards` or `roomData.player1.cards` returning correct values?
2. Is the comparison `c < cardValue` working correctly?
3. Are the cards being filtered correctly to exclude already-played cards?
4. Is `currentPlayedCards` up-to-date when validation occurs?

## Debug Steps

1. Add console.log statements to see:
   - What cards each player has
   - What cards have been played
   - What the "smaller cards" array contains
   - The final isValid result

## Files Affected

- `index.html` - `playCard()` function (lines ~713-810)

## Related Issues

- BUG-002, BUG-003 (might be related to state synchronization)
