<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mind Sync - Ä°ÅŸbirlikÃ§i Kart Oyunu</title>
    <meta name="description" content="2 kiÅŸilik iÅŸbirlikÃ§i kart oyunu. KonuÅŸmadan kartlarÄ± sÄ±rayla oyna - saf sezgi!">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="game-container">
        <!-- Language Switcher -->
        <div class="language-switcher">
            <button class="lang-btn active" data-lang="tr">ğŸ‡¹ğŸ‡· TR</button>
            <button class="lang-btn" data-lang="en">ğŸ‡¬ğŸ‡§ EN</button>
        </div>

        <!-- Header -->
        <header class="game-header">
            <h1>ğŸ§  Mind Sync</h1>
            <p class="tagline" data-tr="Uyum iÃ§inde oyna. Kelimeye gerek yok."
                data-en="Play in harmony. No words needed.">Uyum iÃ§inde oyna. Kelimeye gerek yok.</p>
        </header>

        <!-- Lobby Screen -->
        <section id="lobby" class="screen active">
            <div class="lobby-box">
                <h2 data-tr="Oyun BaÅŸlat" data-en="Start a Game">Oyun BaÅŸlat</h2>

                <!-- Settings Panel -->
                <div class="settings-panel">
                    <h3>âš™ï¸ <span data-tr="Oyun AyarlarÄ±" data-en="Game Settings">Oyun AyarlarÄ±</span></h3>

                    <div class="setting-group">
                        <label data-tr="Zorluk" data-en="Difficulty">Zorluk</label>
                        <div class="setting-options" id="difficultyOptions">
                            <button class="setting-btn" data-value="easy" data-cards="6" data-hand="3">
                                <span data-tr="Kolay" data-en="Easy">Kolay</span>
                                <small>1-6</small>
                            </button>
                            <button class="setting-btn active" data-value="normal" data-cards="10" data-hand="5">
                                <span data-tr="Normal" data-en="Normal">Normal</span>
                                <small>1-10</small>
                            </button>
                            <button class="setting-btn" data-value="hard" data-cards="20" data-hand="5">
                                <span data-tr="Zor" data-en="Hard">Zor</span>
                                <small>1-20</small>
                            </button>
                            <button class="setting-btn" data-value="extreme" data-cards="50" data-hand="5">
                                <span data-tr="Ekstrem" data-en="Extreme">Ekstrem</span>
                                <small>1-50</small>
                            </button>
                        </div>
                        <p class="setting-hint" data-tr="Kart aralÄ±ÄŸÄ± ve el bÃ¼yÃ¼klÃ¼ÄŸÃ¼"
                            data-en="Card range and hand size">Kart aralÄ±ÄŸÄ± ve el bÃ¼yÃ¼klÃ¼ÄŸÃ¼</p>
                    </div>

                    <div class="setting-group">
                        <label data-tr="Ä°zin Verilen Hata" data-en="Mistakes Allowed">Ä°zin Verilen Hata</label>
                        <div class="setting-options" id="mistakeOptions">
                            <button class="setting-btn active" data-value="0">âˆ <span data-tr="SÄ±nÄ±rsÄ±z"
                                    data-en="Infinite">SÄ±nÄ±rsÄ±z</span></button>
                            <button class="setting-btn" data-value="1">1</button>
                            <button class="setting-btn" data-value="2">2</button>
                            <button class="setting-btn" data-value="3">3</button>
                        </div>
                        <p class="setting-hint" data-tr="SÄ±nÄ±rsÄ±z = antrenman modu, hatalarda oyun bitmez"
                            data-en="Infinite = practice mode, no game over on mistakes">SÄ±nÄ±rsÄ±z = antrenman modu,
                            hatalarda oyun bitmez</p>
                    </div>

                    <div class="setting-group">
                        <label data-tr="SÃ¼re (hamle baÅŸÄ±na)" data-en="Timer (per move)">SÃ¼re (hamle baÅŸÄ±na)</label>
                        <div class="setting-options" id="timerOptions">
                            <button class="setting-btn" data-value="0" data-tr="KapalÄ±" data-en="Off">KapalÄ±</button>
                            <button class="setting-btn" data-value="10">10s</button>
                            <button class="setting-btn active" data-value="15">15s</button>
                            <button class="setting-btn" data-value="30">30s</button>
                            <button class="setting-btn" data-value="60">60s</button>
                        </div>
                        <p class="setting-hint" data-tr="Her hamle iÃ§in sÃ¼re limiti"
                            data-en="Time limit for each move before game over">Her hamle iÃ§in sÃ¼re limiti</p>
                    </div>
                </div>

                <div class="lobby-options">
                    <button id="createRoomBtn" class="btn btn-primary">
                        <span class="btn-icon">ğŸ®</span>
                        <span data-tr="Oda OluÅŸtur" data-en="Create Room">Oda OluÅŸtur</span>
                    </button>

                    <div class="divider">
                        <span data-tr="veya" data-en="or">veya</span>
                    </div>

                    <div class="join-section">
                        <input type="text" id="roomCodeInput" data-placeholder-tr="Oda kodu gir"
                            data-placeholder-en="Enter room code" placeholder="Oda kodu gir" maxlength="6"
                            autocomplete="off">
                        <button id="joinRoomBtn" class="btn btn-secondary" data-tr="KatÄ±l" data-en="Join">KatÄ±l</button>
                    </div>
                </div>

                <div id="roomInfo" class="room-info hidden">
                    <p data-tr="Bu kodu partnerinle paylaÅŸ:" data-en="Share this code with your partner:">Bu kodu
                        partnerinle paylaÅŸ:</p>
                    <div class="room-code" id="roomCodeDisplay"></div>
                    <div class="room-settings-display">
                        <span id="roomSettingsText"></span>
                    </div>
                    <p class="waiting-text" data-tr="â³ Partner bekleniyor..."
                        data-en="â³ Waiting for partner to join...">â³ Partner bekleniyor...</p>
                </div>
            </div>
        </section>

        <!-- Game Screen -->
        <section id="game" class="screen">
            <div class="game-layout">
                <!-- Timer & Status -->
                <div class="game-status">
                    <div class="timer-container" id="timerContainer">
                        <div class="timer-ring">
                            <svg viewBox="0 0 100 100">
                                <circle class="timer-bg" cx="50" cy="50" r="45" />
                                <circle class="timer-progress" id="timerProgress" cx="50" cy="50" r="45" />
                            </svg>
                            <span class="timer-text" id="timerText">15</span>
                        </div>
                    </div>
                    <div class="pile-info">
                        <span class="pile-label" data-tr="SÄ±radaki kart:" data-en="Next card needed:">SÄ±radaki
                            kart:</span>
                        <span class="pile-number" id="nextCardNeeded">1</span>
                    </div>
                    <div class="status-right">
                        <div class="cards-played">
                            <span id="cardsPlayedCount">0</span>/10 <span data-tr="kart" data-en="cards">kart</span>
                        </div>
                        <div class="mistakes-display" id="mistakesDisplay">
                            <span class="mistakes-label" data-tr="Hata:" data-en="Mistakes:">Hata:</span>
                            <span class="mistakes-value" id="mistakesValue">âˆ</span>
                        </div>
                    </div>
                </div>

                <!-- Center Pile -->
                <div class="pile-area">
                    <div class="pile" id="pile">
                        <div class="pile-placeholder">
                            <span>?</span>
                        </div>
                    </div>
                    <div class="last-played hidden" id="lastPlayedInfo">
                        <span id="lastPlayerName"></span> <span data-tr="oynadÄ±" data-en="played">oynadÄ±</span> <span
                            id="lastCardValue"></span>
                    </div>
                </div>

                <!-- Player's Hand -->
                <div class="hand-area">
                    <h3 data-tr="Senin KartlarÄ±n" data-en="Your Cards">Senin KartlarÄ±n</h3>
                    <div class="hand" id="playerHand">
                        <!-- Cards will be inserted here -->
                    </div>
                </div>

                <!-- Player Info -->
                <div class="player-info">
                    <div class="player-badge" id="playerBadge">Oyuncu 1</div>
                    <div class="partner-status">
                        <span data-tr="Partner:" data-en="Partner:">Partner:</span>
                        <span id="partnerStatus">ğŸŸ¢ BaÄŸlÄ±</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Result Screen -->
        <section id="result" class="screen">
            <div class="result-box">
                <div class="result-icon" id="resultIcon">ğŸ†</div>
                <h2 id="resultTitle">Zafer!</h2>
                <p id="resultMessage">TÃ¼m 10 kartÄ± mÃ¼kemmel uyum iÃ§inde oynadÄ±nÄ±z!</p>

                <div class="result-stats">
                    <div class="stat">
                        <span class="stat-value" id="statCardsPlayed">10</span>
                        <span class="stat-label" data-tr="Oynanan Kart" data-en="Cards Played">Oynanan Kart</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="statMistakeCard">-</span>
                        <span class="stat-label" data-tr="Hata KartÄ±" data-en="Mistake At">Hata KartÄ±</span>
                    </div>
                </div>

                <button id="playAgainBtn" class="btn btn-primary">
                    <span class="btn-icon">ğŸ”„</span>
                    <span data-tr="Tekrar Oyna" data-en="Play Again">Tekrar Oyna</span>
                </button>
            </div>
        </section>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
        import { getDatabase, ref, set, get, onValue, push, update, remove, onDisconnect } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";
        import { firebaseConfig } from './js/config.js';
        import { init } from './js/app.js';

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Initialize the game with Firebase functions
        init({
            db, ref, set, get, onValue, push, update, remove, onDisconnect
        });
    </script>
</body>

</html>